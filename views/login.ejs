<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>login</title>
</head>
<body>
	<form id="login_form" action="/login_form" method="POST">
		<p>id: <input type="text" name="id"></p>
		<p>password: <input type="text" name="password"></p>
	</form>
	<button type="button" class="login">login</button>
	<div class="result"></div>
	<script>
		document.querySelector('.login').addEventListener('click', function(){
			console.log();
			var id = document.querySelector('input[name="id"]').value;
			var pw = document.querySelector('input[name="password"]').value
			sendAjax('http://localhost:3000/login_form', {'id': id, 'pw': pw});
		});

		function sendAjax(url, data){
			var data = JSON.stringify(data);
			var xhr = new XMLHttpRequest();
			xhr.open('POST', url);
			xhr.setRequestHeader('Content-Type', 'application/json');
			xhr.send(data);
			xhr.addEventListener('load', function(){
				var result = JSON.parse(xhr.responseText);
				if(result.result !== 'ok') return;
				document.querySelector('.result').innerHTML = `welcome ${result.id} !`;
			});
		}
	</script>
</body>
</html>